(function($){var ueditInit={init:function(obj,opt){if(opt.isDefault){var ue=UE.getEditor(opt.idName,{toolbars:[['undo','redo','|','bold','italic','underline','forecolor','|','justifyleft','justifycenter','justifyright','justifyjustify','simpleupload','insertimage','fullscreen']],initialFrameHeight:(opt.ueditHeight==""?"280":opt.ueditHeight),scaleEnabled:true,autoHeightEnabled:false,autoFloatEnabled:false,elementPathEnabled:false,autoClearinitialContent:true,catchRemoteImageEnable:false,autoSyncData:false,'filterTxtRules':function(){function transP(node){node.tagName='p';node.setStyle()}return{'-':'script style object iframe embed input select','p':{$:{}},'br':{$:{}},'div':{'$':{}},'table':{'$':{'tr':{'td':{}}}},'img':function(node){var txt=!!node.innerText();if(txt){node.parentNode.insertAfter(UE.uNode.createText(''),node)}node.parentNode.removeChild(node,node.innerText())},'caption':transP,'th':transP,'tr':transP,'h1':{'$':{}},'h2':transP,'h3':transP,'h4':transP,'h5':transP,'h6':transP,'li':transP,'td':function(node){var txt=!!node.innerText();if(txt){node.parentNode.insertAfter(UE.uNode.createText(' &nbsp; &nbsp;'),node)}node.parentNode.removeChild(node,node.innerText())}}}()});if(opt.fontLen!=""){ue.ready(function(){var currFontNumStr='<div class="uedit-font-number">已输入0个字，您还可以输入'+opt.fontLen+'个字</div>';$("#"+opt.idName).append($(currFontNumStr))});ue.addListener('selectionchange',function(){var txt=this.getContent();txt=txt.replace(/<[^>]+>/g,"");if(txt.length>parseInt(opt.fontLen)){$("#"+opt.idName+" .uedit-font-number").text('请不要超过'+opt.fontLen+'个字').css('color','red');$("#"+opt.idName+" .edui-editor").addClass("valid-hint");$("#"+opt.idName).next().text('')}else{$("#"+opt.idName+" .uedit-font-number").text('已输入'+txt.length+'个字，您还可以输入'+(parseInt(opt.fontLen)-txt.length)+'个字').css('color','#999');$("#"+opt.idName+" .edui-editor").removeClass("valid-hint");$("#"+opt.idName).next().text('')}if(opt.validMsg!=""){if(txt.length>0){$("#"+opt.idName+" .edui-editor").removeClass("valid-hint");$("#"+opt.idName).next().text('')}}});ue.addListener("blur",function(){var txt=this.getContent();txt=txt.replace(/<[^>]+>/g,"");if(opt.validMsg!=""){if(txt.length>0){$("#"+opt.idName+" .edui-editor").removeClass("valid-hint");$("#"+opt.idName).next().text('')}else{$("#"+opt.idName+" .edui-editor").addClass("valid-hint");$("#"+opt.idName).next().text(opt.validMsg)}}})}}else{var ueTwo=UE.getEditor(opt.idName,{toolbars:[['undo','redo','|','bold','italic','underline','forecolor','|','justifyleft','justifycenter','justifyright','justifyjustify']],initialFrameHeight:(opt.ueditHeight==""?"280":opt.ueditHeight),scaleEnabled:true,autoHeightEnabled:false,autoFloatEnabled:false,elementPathEnabled:false,autoClearinitialContent:true,enableAutoSave:false,catchRemoteImageEnable:false,autoSyncData:false,'filterTxtRules':function(){function transP(node){node.tagName='p';node.setStyle()}return{'-':'script style object iframe embed input select','p':{$:{}},'br':{$:{}},'div':{'$':{}},'table':{'$':{'tr':{'td':{}}}},'img':function(node){var txt=!!node.innerText();if(txt){node.parentNode.insertAfter(UE.uNode.createText(''),node)}node.parentNode.removeChild(node,node.innerText())},'caption':transP,'th':transP,'tr':transP,'h1':{'$':{}},'h2':transP,'h3':transP,'h4':transP,'h5':transP,'h6':transP,'li':transP,'td':function(node){var txt=!!node.innerText();if(txt){node.parentNode.insertAfter(UE.uNode.createText(' &nbsp; &nbsp;'),node)}node.parentNode.removeChild(node,node.innerText())}}}()});ueTwo.ready(function(){$("#"+opt.idName).find(".edui-default .edui-button.edui-for-undo .edui-icon").html('<img style="width:20px;float: left;" src="../../resources/images/uedit/undo-icon.png"/>');$("#"+opt.idName).find(".edui-default .edui-default .edui-button.edui-for-redo .edui-icon").html('<img style="width:20px;float: left;" src="../../resources/images/uedit/redo-icon.png"/>');$("#"+opt.idName).find(".edui-default .edui-default .edui-button.edui-for-bold .edui-icon").html('<img style="width:20px;float: left;" src="../../resources/images/uedit/bold-icon.png"/>');$("#"+opt.idName).find(".edui-default .edui-default .edui-button.edui-for-italic .edui-icon").html('<img style="width:20px;" src="../../resources/images/uedit/italic-icon.png"/>');$("#"+opt.idName).find(".edui-default .edui-default .edui-button.edui-for-underline .edui-icon").html('<img style="width:20px;" src="../../resources/images/uedit/underline-icon.png"/>');$("#"+opt.idName).find(".edui-default .edui-default .edui-for-forecolor .edui-icon").html('<img style="width:20px;" src="../../resources/images/uedit/forecolor-icon.png"/>');$("#"+opt.idName).find(".edui-default .edui-default .edui-button.edui-for-justifyleft .edui-icon").html('<img style="width:20px;float: left;" src="../../resources/images/uedit/justifyleft-icon.png"/>');$("#"+opt.idName).find(".edui-default .edui-default .edui-button.edui-for-justifycenter .edui-icon").html('<img style="width:20px;float: left;" src="../../resources/images/uedit/justifycenter-icon.png"/>');$("#"+opt.idName).find(".edui-default .edui-default .edui-button.edui-for-justifyright .edui-icon").html('<img style="width:20px;float: left;" src="../../resources/images/uedit/justifyright-icon.png"/>');$("#"+opt.idName).find(".edui-default .edui-default .edui-button.edui-for-justifyjustify .edui-icon").html('<img style="width:20px;float: left;" src="../../resources/images/uedit/justifyjustify-icon.png"/>');$("#"+opt.idName).find('.edui-toolbar .edui-button .edui-icon').css({'text-align':'center','background':'none'});$("#"+opt.idName).find('.edui-default:not(.edui-button-wrap) .edui-toolbar .edui-menubutton .edui-icon').css({'text-align':'center','background':'none'});$("#"+opt.idName).find('.edui-default:not(.edui-button-wrap) .edui-toolbar .edui-splitbutton .edui-icon').css({'text-align':'center','background':'none'});if(opt.fontLen!=""){var currFontNumStr='<div class="uedit-font-number">已输入0个字，您还可以输入'+opt.fontLen+'个字</div>';$("#"+opt.idName).append($(currFontNumStr))}});if(opt.fontLen!=""){ueTwo.addListener('selectionchange',function(){var txt=this.getContent();txt=txt.replace(/<[^>]+>/g,"");if(txt.length>parseInt(opt.fontLen)){$("#"+opt.idName+" .uedit-font-number").text('请不要超过'+opt.fontLen+'个字').css('color','red');$("#"+opt.idName+" .edui-editor").addClass("valid-hint");$("#"+opt.idName).next().text('')}else{$("#"+opt.idName+" .uedit-font-number").text('已输入'+txt.length+'个字，您还可以输入'+(parseInt(opt.fontLen)-txt.length)+'个字').css('color','#999');$("#"+opt.idName+" .edui-editor").removeClass("valid-hint");$("#"+opt.idName).next().text('')}if(opt.validMsg!=""){if(txt.length>0){$("#"+opt.idName+" .edui-editor").removeClass("valid-hint");$("#"+opt.idName).next().text('')}}});ueTwo.addListener("blur",function(){var txt=this.getContent();txt=txt.replace(/<[^>]+>/g,"");if(opt.validMsg!=""){if(txt.length>0){$("#"+opt.idName+" .edui-editor").removeClass("valid-hint");$("#"+opt.idName).next().text('')}else{$("#"+opt.idName+" .edui-editor").addClass("valid-hint");$("#"+opt.idName).next().text(opt.validMsg)}}})}}}};$.fn.extend({ueditInit:function(opt){var defaults={isDefault:true,validMsg:'',idName:'',ueditHeight:'',fontLen:''};var options=$.extend(defaults,opt);this.ytUeditControl=ueditInit;this.ytUeditControl.init($(this),options);return $(this)}})})(jQuery);