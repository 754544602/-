var $yt_screen_data={init:function(){$yt_screen_data.events()},events:function(){$yt_screen_data.getAllBudgetSpecialInfoList();$("#queryBtn").click(function(){});$("#resetBtn").click(function(){$(".rela-dept-search").val('')});$(".yt-relevance-pop .yt-eidt-model-bottom button").click(function(){if($(this).hasClass("save-btn")){}$(".rela-dept-search").val('');$('.role-right-ul').empty();sysCommon.closeModel($(".yt-relevance-pop"))});$(".yt-set-role-button").on("click",".right",function(){$yt_screen_data.addRightData()});$(".yt-set-role-button").on("click",".d-right",function(){var uncheckNode=$('#dataItemTree').tree('getChecked','unchecked');var checkNodes=$('#dataItemTree').tree('getChecked');$.each(uncheckNode,function(i,n){$("#dataItemTree").tree("check",n.target)});$.each(checkNodes,function(i,n){$("#"+n.domId).find("span.tree-title").css("color","rgb(65, 141, 204)")});$("#dataItemTree").tree('expandAll',uncheckNode.target);$yt_screen_data.addRightData()});$(".yt-set-role-button").on("click",".left",function(){var childNode=$("#dataItemTree").tree('getChecked');var parentNode="";var parentsNode="";var selDatas=[];$(".role-right-ul li.li-active").each(function(i,n){selDatas.push($(n).attr('liid'))});$.each(childNode,function(i,n){$.each(selDatas,function(i,s){if(n.id==selDatas[i]){$("#dataItemTree").tree("uncheck",n.target);$("#"+n.domId).find("span.tree-title").css("color","#333")}})});$(".role-right-ul").find('.li-active').remove()});$(".yt-set-role-button").on("click",".d-left",function(){var oneright=$("#dataItemTree").tree('getChecked');var rootNode=$('#dataItemTree').tree('getRoot');$("#dataItemTree").tree('collapseAll',rootNode.target);$.each(oneright,function(i,n){$('#dataItemTree').tree('uncheck',oneright[i].target)});$(".role-right-ul").find('li').remove()});$(".role-right-ul").on('click',"li",function(){$(this).toggleClass('li-active')})},getAllBudgetSpecialInfoList:function(){$.ajax({type:"get",url:$websit_path+'resources/js/screenData/specialInfoList.json',success:function(data){var trStr="";if(data.flag==0){var dataL=data.data.tableKeyList;var dataR=data.data.rightTableKeyList;$("#dataItemTree").tree({data:dataL,animate:true,checkbox:true,onClick:function(node){if(node.checkState!=undefined){if(node.checkState=="checked"){$("#dataItemTree").tree("uncheck",$("#"+node.domId));$("#"+node.domId).find("span.tree-title").css("color","#333")}else{$("#dataItemTree").tree("check",$("#"+node.domId));$("#"+node.domId).find("span.tree-title").css("color","#418dcc")}}},onCheck:function(node,checked){if(checked){$("#"+node.domId).find("span.tree-title").css("color","#418dcc");$("#"+node.domId).next().find("li span.tree-title").css("color","#418dcc")}else{$("#"+node.domId).find("span.tree-title").css("color","#333");$("#"+node.domId).next().find("li span.tree-title").css("color","#333")}}});$(".tree-icon,.tree-file").removeClass("tree-icon tree-file");$(".tree-icon,.tree-folder").removeClass("tree-icon tree-folder tree-folder-open tree-folder-closed");var liStr="";var htmlUl=$(".role-right-ul");if(dataR.length>0){$(".role-right-ul").find('li').remove();$.each(dataR,function(i,n){liStr+='<li tableDictCode="'+n.tableDictCode+'" liId='+n.subCode+'>'+n.subName+'</li>'});htmlUl.append(liStr)}}},error:function(data){}})},addRightData:function(){var checkNode=$('#dataItemTree').tree('getChecked');var ulBody=$(".role-right-ul");var checkDict={};var liAttr=$(".role-right-ul li");if(liAttr!=undefined){var checkKey="";var checkValue=",";var getLiVal="";$.each(liAttr,function(i,d){getLiVal=$(d).attr('liid')==undefined||$(d).attr('liid')==null?"":$(d).attr('liid');checkKey=$(d).attr('tableDictCode')==undefined||$(d).attr('tableDictCode')==null?"":$(d).attr('tableDictCode');checkValue=checkDict[checkKey];if(checkValue==undefined||checkValue==null){checkValue=","}checkValue=checkValue+(getLiVal==""?"":getLiVal+",");checkDict[checkKey]=checkValue})}checkValue="";var liStr="";$.each(checkNode,function(i,n){if(n.sortId){checkValue=checkDict[n.tableDictCode]==undefined||checkDict[n.tableDictCode]==null?"":checkDict[n.tableDictCode];if(checkValue.indexOf(","+n.id+",")<0){liStr+='<li tableDictCode="'+n.tableDictCode+'" liid='+n.id+'>'+n.text+'</li>'}}});ulBody.append(liStr)}};$(function(){$yt_screen_data.init()});