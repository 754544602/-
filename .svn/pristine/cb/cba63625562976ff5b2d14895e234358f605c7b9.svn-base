/**
 *
 * 创建当前业务对象
 * 当前给出的是示例，研发中根据自己的业务进行创建
 * 命名规范:驼峰命名，首字母小写，后面加上Obj结束
 */
var loanApplyObj={sortTypea:'',pageIndexa:0,init:function(){$("#txtDate1").calendar({speed:0,complement:true,readonly:true,lowerLimit:"2010/01/01",nowData:false,dateFmt:"yyyy-MM-dd",callback:function(){}});$("#txtDate2").calendar({speed:0,complement:true,readonly:true,lowerLimit:"2010/01/01",nowData:false,dateFmt:"yyyy-MM-dd",callback:function(){}});loanApplyObj.getBrowseTotalListByParams(1)},events:function(){var pageIndex=1;$(".query-btn").click(function(){loanApplyObj.getBrowseTotalListByParams(1)});$(".query-data-btn").click(function(){loanApplyObj.sortTypea='lastTime';loanApplyObj.getBrowseTotalListByParams(1)});$(".query-num-btn").click(function(){loanApplyObj.sortTypea='browseFrequency';loanApplyObj.getBrowseTotalListByParams(1)});$(".page-num").click(function(){pageIndex=pageIndex+1;loanApplyObj.getBrowseTotalListByParams(pageIndex)});$(".assist-btn").click(function(){$("#txtDate1").val('');$("#txtDate2").val('');loanApplyObj.getBrowseTotalListByParams(1)});$(".payment-table").on('click','.jump-url',function(){window.location.href=$yt_option.websit_path+"view/browseVol/browseDetailed.html"})},getBrowseTotalListByParams:function(pageIndex){var startDate=$("#txtDate1").val();var endDate=$('#txtDate2').val();var sortType=loanApplyObj.sortTypea;var pageNum=15;if(pageIndex==1){$(".payment-table tbody").empty()}$.ajax({type:"post",url:"widget/browse/getBrowseTotalListByParams",async:false,data:{startDate:startDate,endDate:endDate,sortType:sortType,pageIndex:pageIndex,pageNum:pageNum},success:function(data){console.info(data);if(data.flag==0){var trStr="";if(data.data.total>0){$('.page-ing').show();$('.page-ing').text("加载更多...");if(data.data.rows.length>0){$.each(data.data.rows,function(i,n){trStr+='<tr><td><span style="float: left;">('+n.widgetCode+")"+n.widgetName+'</span></td><td><a class="yt-link jump-url" style="float: right;">'+n.BROWSE_FREQUENCY+'</a></td><td>'+n.LAST_BROWSING_TIME+'</td></tr>'})}else{$('.page-ing').text("暂无更多数据")}$(".payment-table tbody").append(trStr)}else{$('.page-ing').hide();$(".payment-table tbody").append(sysCommon.noDataTrStr(3))}}}})}};$(function(){loanApplyObj.init();loanApplyObj.events()});