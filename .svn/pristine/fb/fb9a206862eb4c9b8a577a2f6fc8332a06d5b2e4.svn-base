/***
 *
 *
 * C(21)拖拽添加数据
 *
 *
 *
 */
var dragEvent={clickAddData:function(){$(".add-div-btn").off().on("click",function(){var i=$(".yt-drag-list div").length+1;var li='<div class="yt-drag">第'+i+'条数据</div>';$(this).prev().append(li)})},drageData:function(option){var yt_drag={mouse_left:0,mouse_top:0,drag_down:[]};option.selObj.delegate("div","mousedown",function(e){var scrollTop=$(window).scrollTop();var scrollLeft=$(window).scrollLeft();var thisData=$(this);thisData.addClass("data-sel-styl");var offset=$(this).offset();var css_data={left:e.pageX-scrollLeft,top:e.pageY-scrollTo};option.dataFram.each(function(){var offset=$(this).offset();yt_drag.drag_down.push({element:$(this),top:offset.top,left:offset.left,right:offset.left+$(this).width(),bottom:offset.top+$(this).height()})});yt_drag.mouse_left=e.pageX-offset.left;yt_drag.mouse_top=e.pageY-offset.top;$("body").append('<div class="yt-drag-div"><div class="drag-clone-div" style="width:52px;"></div></div>');$(".drag-clone-div").append($(".data-sel-styl").clone().css(css_data).addClass("drag-clone").removeClass("data-sel-styl"));$("body .yt-drag-div").mousemove(function(e){var left=e.pageX;var top=e.pageY;$(".drag-clone").css({left:e.pageX-yt_drag.mouse_left-scrollLeft,top:e.pageY-yt_drag.mouse_top-scrollTop});$.each(yt_drag.drag_down,function(i,n){if(left>n.left&&left<n.right&&top>n.top&&top<n.bottom){n.element.addClass("yt-drag-down-ative");option.selObj.find("div").removeClass("data-sel-styl")}else{n.element.removeClass("yt-drag-down-ative")}})});$("body .yt-drag-div").mouseup(function(e){var isDragPosition=option.isPosition==undefined?false:option.isPosition;if(isDragPosition){var left=e.pageX;var top=e.pageY;if(!$(".yt-drag-down").hasClass("yt-drag-down-ative")){$(".drag-clone").remove();option.selObj.find("div").removeClass("data-sel-styl")}else{$(".drag-clone").css({left:$(".drag-clone").offset().left-$(".yt-drag-down-ative").offset().left,top:$(".drag-clone").offset().top-$(".yt-drag-down-ative").offset().top});$(".drag-clone").css("position","absolute");$(".yt-drag-down-ative").css("position","relative")}}var mouseupFunction=option.mouseupFunction;if(mouseupFunction){mouseupFunction(option.dataFram,thisData)}$(".yt-drag-div").remove();$(".yt-drag-div .drag-clone-div").remove();option.dataFram.removeClass("yt-drag-down-ative")})})}};